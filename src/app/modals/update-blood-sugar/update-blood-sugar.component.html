<ion-app class="text-gray-900">
  <ion-header
    class="bg-blue-100 px-4 py-6 ion-no-border text-xl flex justify-between items-center"
  >
    <p class="font-bold">Record blood sugar level</p>
    <ion-icon
      (click)="modalController.dismiss()"
      name="close"
      class="bg-gray-500 text-2xl text-white rounded-full"
    ></ion-icon>
  </ion-header>
  <ion-content>
    <div class="p-4 space-y-4">
      <ion-item>
        <ion-label class="block font-calibre w-full" position="stacked"
          >Unit of measurement</ion-label
        >
        <ion-select
          value="mmol/l"
          [(ngModel)]="bloodSugar.unit"
          (ngModelChange)="updateTip()"
          class="w-full"
          placeholder="Choose unit of measurement"
          interface="popover"
        >
          <ion-select-option value="mmol/l">mmol/L</ion-select-option>
          <ion-select-option value="mg/dl">mg/dl</ion-select-option>
        </ion-select>
      </ion-item>
      <ion-item>
        <ion-label class="block font-calibre w-full" position="stacked"
          >Reading time</ion-label
        >
        <ion-select
          [value]="bloodSugar.reading_time"
          [(ngModel)]="bloodSugar.reading_time"
          class="w-full"
          placeholder="Choose reading time"
          (ngModelChange)="updateTip()"
          interface="popover"
        >
          <ion-select-option value="before">Before meal</ion-select-option>
          <ion-select-option value="after">
            2 hours after meal
          </ion-select-option>
        </ion-select>
      </ion-item>

      <ion-item onclick="scrollIntoView(this)">
        <ion-label class="block font-calibre w-full" position="stacked"
          >Blood glucose
          <span *ngIf="bloodSugar.unit"
            >({{ bloodSugar.unit }})</span
          ></ion-label
        >
        <ion-input
          placeholder="Enter blood sugar level"
          type="number"
          [value]="bloodSugar.reading"
          [(ngModel)]="bloodSugar.reading"
          (ngModelChange)="updateTip()"
        ></ion-input>
      </ion-item>

      <div *ngIf="tip">
        <div class="flex items-center">
          <ion-icon
            name="information-circle-outline"
            class="text-blue-600 text-xl inline-block mr-2 relative -top-1"
          ></ion-icon>
          <span>Health Tip</span>
        </div>
        <p class="text-gray-400 mt-3 font-geomanist" [innerHTML]="tip"></p>
      </div>

      <span
        (click)="save()"
        class="w-full bg-accentBlue p-4 font-semibold text-center block text-white uppercase rounded-xl mt-10 bottom-4 sticky"
        >Done</span
      >
    </div>
  </ion-content>
</ion-app>
