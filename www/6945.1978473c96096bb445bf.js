(self.webpackChunkcom_app_shei_manageam=self.webpackChunkcom_app_shei_manageam||[]).push([[6945],{6945:(e,t,n)=>{"use strict";n.r(t),n.d(t,{HomePageModule:()=>C});var i=n(8583),r=n(665),o=n(3083),s=n(7456),l=n(4762),c=n(3856),a=n(639),d=n(1289);function m(e,t){if(1&e){const e=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"ion-item",6),a["\u0275\u0275listener"]("click",function(){const t=a["\u0275\u0275restoreView"](e).$implicit;return a["\u0275\u0275nextContext"]().view(t)}),a["\u0275\u0275elementStart"](1,"p",7),a["\u0275\u0275text"](2),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](e.topic)}}let p=(()=>{class e{constructor(e,t,n){this.educationService=e,this.modalController=t,this.platform=n,this.searched=[],this.searchText="",this.allTopics=[],this.subs=[]}ngOnInit(){let e=this.educationService.allTopics.subscribe(e=>{this.allTopics=e});this.subs.push(e),e=this.platform.backButton.subscribe(()=>{this.modalController.dismiss()}),this.subs.push(e)}search(){if(this.searched=[],this.searchText.length<1)return;const e=new RegExp(this.searchText,"ig");this.searched=this.allTopics.filter(t=>e.test(t.title)||e.test(t.description)).slice(0,10)}view(e){return(0,l.mG)(this,void 0,void 0,function*(){const t=yield this.modalController.create({component:c.W,componentProps:{topic:e}});yield t.present()})}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}}return e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](d.P),a["\u0275\u0275directiveInject"](o.ModalController),a["\u0275\u0275directiveInject"](o.Platform))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["app-search"]],decls:9,vars:2,consts:[[1,"bg-white","text-gray-900"],[1,"ion-no-border","flex","justify-between","font-geomanist"],[1,"bg-white","flex","w-full","p-4","items-center","border-b","border-gray-200"],["name","search",1,"text-2xl","p-2"],["type","text","placeholder","Search on diabetes...",1,"py-4","w-full","outline-none","search","bg-white",3,"ngModel","ngModelChange"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],[1,"px-4","py-2","text-gray-900"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"ion-app",0),a["\u0275\u0275elementStart"](1,"ion-header",1),a["\u0275\u0275elementStart"](2,"div",2),a["\u0275\u0275element"](3,"ion-icon",3),a["\u0275\u0275elementStart"](4,"input",4),a["\u0275\u0275listener"]("ngModelChange",function(e){return t.searchText=e})("ngModelChange",function(){return t.search()}),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](5,"ion-content"),a["\u0275\u0275elementStart"](6,"div"),a["\u0275\u0275elementStart"](7,"ion-list"),a["\u0275\u0275template"](8,m,3,1,"ion-item",5),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("ngModel",t.searchText),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("ngForOf",t.searched))},directives:[o.IonApp,o.IonHeader,o.IonIcon,r.DefaultValueAccessor,r.NgControlStatus,r.NgModel,o.IonContent,o.IonList,i.NgForOf,o.IonItem],styles:[""]}),e})();var u=n(9709),h=n(8384);const f=(0,h.fo)("PushNotifications",{}),v=(0,h.fo)("Device",{web:()=>n.e(7811).then(n.bind(n,7811)).then(e=>new e.DeviceWeb)});var g=n(2340),b=n(1841);let x=(()=>{class e{constructor(e,t){this.http=e,this.userService=t}pushFCMToken({token:e,device_id:t}){const n=this.userService.fetchDetails(),{user_details:{id:i}}=n,r=new FormData;return r.append("fcm_token",e),r.append("user_id",i),r.append("device_id",t),this.http.post(`${g.N.apiUrl}/token?silent=true`,r)}}return e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275inject"](b.eN),a["\u0275\u0275inject"](u.K))},e.\u0275prov=a["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),S=(()=>{class e{constructor(e){this.settingService=e}init(){return(0,l.mG)(this,void 0,void 0,function*(){"web"!=h.dV.getPlatform()&&(this.registerPush(),this.registerListeners())})}registerPush(){return(0,l.mG)(this,void 0,void 0,function*(){let e=yield f.checkPermissions();if("prompt"===e.receive&&(e=yield f.requestPermissions()),"granted"!==e.receive)throw new Error("User denied permissions!");yield f.register()})}registerListeners(){return(0,l.mG)(this,void 0,void 0,function*(){const e=(yield v.getId()).uuid;yield f.addListener("registration",t=>{this.settingService.pushFCMToken({token:t.value,device_id:e}).subscribe(),console.info("Registration token: ",t.value)}),yield f.addListener("registrationError",e=>{console.error("Registration error: ",e.error)}),yield f.addListener("pushNotificationActionPerformed",e=>{console.log("Push notification action performed",e.actionId,e.inputValue)})})}}return e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275inject"](x))},e.\u0275prov=a["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var y=n(3171),I=n(8632);const w=[{path:"",component:(()=>{class e{constructor(e,t,n,i){this.userService=e,this.modalController=t,this.router=n,this.fcmService=i,this.user={},this.tip={}}ngOnInit(){this.userService.userDetails().subscribe(e=>{this.user=e}),this.userService.fetchTip().subscribe(e=>{this.tip=e}),this.fcmService.init()}showSearch(){return(0,l.mG)(this,void 0,void 0,function*(){const e=yield this.modalController.create({component:p,cssClass:"modal-70"});yield e.present()})}}return e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](u.K),a["\u0275\u0275directiveInject"](o.ModalController),a["\u0275\u0275directiveInject"](s.F0),a["\u0275\u0275directiveInject"](S))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["app-home"]],decls:26,vars:3,consts:[[1,"pale-bg-default","min-h-full"],[1,"p-4"],[1,"text-3xl","font-bold","font-calibre"],[1,"font-geomanist"],[1,"bg-white","mt-4","flex","px-2","items-center","rounded",3,"click"],["name","search",1,"text-2xl","p-2"],["type","text",1,"py-4","w-full","text-gray-500"],[1,"px-4","py-2","capitalize","text-xl","font-bold"],[1,"p-4","bg-white","grid","grid-cols-12",3,"click"],[1,"text-center","col-span-3"],["src","/assets/img/tip.svg"],[1,"col-span-9"],[1,"font-bold","mb-1","text-xl"],[1,"text-accentBlue","font-geomanist"],[1,"text-gray-500","font-geomanist"],[1,"py-8","px-4","grid","grid-cols-2","gap-5"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"div",0),a["\u0275\u0275elementStart"](1,"div",1),a["\u0275\u0275elementStart"](2,"p",2),a["\u0275\u0275text"](3),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](4,"p",3),a["\u0275\u0275text"](5," Let's keep you up to date on your health, learn something new today. "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](6,"div",4),a["\u0275\u0275listener"]("click",function(){return t.showSearch()}),a["\u0275\u0275element"](7,"ion-icon",5),a["\u0275\u0275elementStart"](8,"p",6),a["\u0275\u0275text"](9,"Search on diabetes..."),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](10,"div"),a["\u0275\u0275elementStart"](11,"p",7),a["\u0275\u0275text"](12,"Daily health tip"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](13,"a",8),a["\u0275\u0275listener"]("click",function(){return t.router.navigate(["/education"])}),a["\u0275\u0275elementStart"](14,"div",9),a["\u0275\u0275element"](15,"img",10),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](16,"div",11),a["\u0275\u0275elementStart"](17,"p",12),a["\u0275\u0275text"](18),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](19,"p",13),a["\u0275\u0275text"](20,"Learn more About diabetes"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](21,"p",14),a["\u0275\u0275text"](22),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](23,"div",15),a["\u0275\u0275element"](24,"app-blood-sugar"),a["\u0275\u0275element"](25,"app-blood-pressure"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"]("Hello, ",t.user.name,""),a["\u0275\u0275advance"](15),a["\u0275\u0275textInterpolate"](t.tip.title),a["\u0275\u0275advance"](4),a["\u0275\u0275textInterpolate"](t.tip.note))},directives:[o.IonIcon,y.$,I.U],styles:[""]}),e})()}];let E=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=a["\u0275\u0275defineInjector"]({imports:[[s.Bz.forChild(w)],s.Bz]}),e})();var k=n(1930);let C=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=a["\u0275\u0275defineInjector"]({imports:[[i.CommonModule,r.FormsModule,o.IonicModule,E,o.IonicModule,k.K]]}),e})()}}]);