(self.webpackChunkcom_app_shei_manageam=self.webpackChunkcom_app_shei_manageam||[]).push([[5480],{8932:(e,t,n)=>{"use strict";n.d(t,{I:()=>o});var r=n(639);const i=["expandWrapper"],l=["*"];let o=(()=>{class e{constructor(e){this.renderer=e,this.expanded=!1,this.expandHeight="150px"}ngAfterViewInit(){this.renderer.setStyle(this.expandWrapper.nativeElement,"max-height",this.expandHeight)}}return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](r.Renderer2))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["app-expandable"]],viewQuery:function(e,t){if(1&e&&r["\u0275\u0275viewQuery"](i,5,r.ElementRef),2&e){let e;r["\u0275\u0275queryRefresh"](e=r["\u0275\u0275loadQuery"]())&&(t.expandWrapper=e.first)}},inputs:{expanded:"expanded",expandHeight:"expandHeight"},ngContentSelectors:l,decls:3,vars:2,consts:[[1,"expand-wrapper"],["expandWrapper",""]],template:function(e,t){1&e&&(r["\u0275\u0275projectionDef"](),r["\u0275\u0275elementStart"](0,"div",0,1),r["\u0275\u0275projection"](2),r["\u0275\u0275elementEnd"]()),2&e&&r["\u0275\u0275classProp"]("collapsed",!t.expanded)},styles:[".expand-wrapper[_ngcontent-%COMP%]{transition:max-height .4s ease-in-out;overflow:hidden;height:auto}.collapsed[_ngcontent-%COMP%]{max-height:0!important}"]}),e})()},5480:(e,t,n)=>{"use strict";n.r(t),n.d(t,{ReminderPageModule:()=>C});var r=n(8583),i=n(665),l=n(3083),o=n(7456),a=n(4762);const d=(0,n(8384).fo)("LocalNotifications",{web:()=>n.e(1161).then(n.bind(n,8538)).then(e=>new e.LocalNotificationsWeb)});var s=n(639),c=n(6215),m=n(9019),p=n(1841),u=n(9709);let h=(()=>{class e{constructor(e,t){this.http=e,this.userService=t,this.url=m.N.apiUrl+"/reminders";const n=localStorage.reminders||"[]";this.reminders=new c.X(JSON.parse(n))}get(){return this.update(),this.reminders}update(){const e=this.userService.fetchDetails(),{user_details:{id:t}}=e;this.http.get(`${this.url}/all/${t}`).subscribe(e=>{localStorage.reminders=JSON.stringify(e),this.reminders.next(e)})}remove(e){const t=this.userService.fetchDetails(),{user_details:{id:n}}=t;return this.http.delete(`${this.url}/delete/${e}?user_id=${n}`)}add(e){const{user_details:{id:t}}=this.userService.fetchDetails();return e=Object.assign(Object.assign({},e),{user_id:t}),this.http.post(`${this.url}/create`,e)}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275inject"](p.eN),s["\u0275\u0275inject"](u.K))},e.\u0275prov=s["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var g=n(9833),x=n(7020),v=n(4031);let f=(()=>{class e{constructor(e,t,n,r,i,l){this.modalController=e,this.reminderService=t,this.platform=n,this.webSocket=r,this.auth=i,this.global=l,this.reminder={category:"",title:"",time:"",repeat:"",note:""},this.subs=[],this.minDate=new Date}ngOnInit(){const e=this.platform.backButton.subscribe(()=>{this.modalController.dismiss()});this.subs.push(e)}save(){if(!(this.reminder.category&&this.reminder.title&&this.reminder.time&&this.reminder.repeat&&this.reminder.note))return this.global.alert("Add reminder","All fields are required!",["Okay"]);const e=Object.assign(Object.assign({},this.reminder),{id:Math.floor(1e6*Math.random()+1)});this.reminderService.add(e).subscribe(()=>{this.schedule(e),this.webSocket.emit("reminder:update",{user_id:this.auth.loggedUser().id}),this.modalController.dismiss()})}schedule(e){let t={at:new Date(e.time)};"never"!=e.repeat&&(t.every=e.repeat,t.repeat=!0),d.schedule({notifications:[{title:e.title,body:e.note,id:e.id,schedule:t}]})}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](l.ModalController),s["\u0275\u0275directiveInject"](h),s["\u0275\u0275directiveInject"](l.Platform),s["\u0275\u0275directiveInject"](g.i),s["\u0275\u0275directiveInject"](x.$),s["\u0275\u0275directiveInject"](v.U))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["app-add-reminder"]],decls:49,vars:9,consts:[[1,"text-gray-900"],[1,"bg-blue-100","px-4","py-6","ion-no-border","text-xl","flex","justify-between","items-center"],[1,"font-bold"],["name","close",1,"bg-gray-500","text-2xl","text-white","rounded-full",3,"click"],[1,"p-4","space-y-4"],["position","stacked",1,"block","font-calibre","w-full"],["placeholder","Choose category",1,"w-full",3,"value","ngModel","ngModelChange"],["value","glucose-meter"],["value","medication-tracker"],["value","exercise"],["value","doctors-appointment"],["placeholder","Enter title of the reminder","type","text",3,"value","ngModel","ngModelChange"],["displayFormat","YYYY-MM-DD HH:mm","placeholder","Pick date and time to be reminded",3,"ngModel","ngModelChange"],["placeholder","Choose a repeat for the reminder",1,"w-full",3,"value","ngModel","ngModelChange"],["value","never"],["value","hour"],["value","day"],["value","week"],["value","month"],["value","year"],["placeholder","Enter reminder note",3,"value","ngModel","ngModelChange"],[1,"w-full","bg-accentBlue","p-4","font-semibold","text-center","block","text-white","uppercase","rounded-xl","mt-10",3,"click"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"ion-app",0),s["\u0275\u0275elementStart"](1,"ion-header",1),s["\u0275\u0275elementStart"](2,"p",2),s["\u0275\u0275text"](3,"New Reminder"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](4,"ion-icon",3),s["\u0275\u0275listener"]("click",function(){return t.modalController.dismiss()}),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](5,"ion-content"),s["\u0275\u0275elementStart"](6,"div",4),s["\u0275\u0275elementStart"](7,"ion-item"),s["\u0275\u0275elementStart"](8,"ion-label",5),s["\u0275\u0275text"](9,"Category"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](10,"ion-select",6),s["\u0275\u0275listener"]("ngModelChange",function(e){return t.reminder.category=e}),s["\u0275\u0275elementStart"](11,"ion-select-option",7),s["\u0275\u0275text"](12,"Glucose meter"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](13,"ion-select-option",8),s["\u0275\u0275text"](14,"Medication Tracker"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](15,"ion-select-option",9),s["\u0275\u0275text"](16,"Exercise"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](17,"ion-select-option",10),s["\u0275\u0275text"](18,"Doctor's appointment"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](19,"ion-item"),s["\u0275\u0275elementStart"](20,"ion-label",5),s["\u0275\u0275text"](21,"Title"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](22,"ion-input",11),s["\u0275\u0275listener"]("ngModelChange",function(e){return t.reminder.title=e}),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](23,"ion-item"),s["\u0275\u0275elementStart"](24,"ion-label",5),s["\u0275\u0275text"](25,"Date and time to be reminded"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](26,"ion-datetime",12),s["\u0275\u0275listener"]("ngModelChange",function(e){return t.reminder.time=e}),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](27,"ion-item"),s["\u0275\u0275elementStart"](28,"ion-label",5),s["\u0275\u0275text"](29,"Repeat"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](30,"ion-select",13),s["\u0275\u0275listener"]("ngModelChange",function(e){return t.reminder.repeat=e}),s["\u0275\u0275elementStart"](31,"ion-select-option",14),s["\u0275\u0275text"](32,"Never"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](33,"ion-select-option",15),s["\u0275\u0275text"](34,"Every hour"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](35,"ion-select-option",16),s["\u0275\u0275text"](36,"Every day"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](37,"ion-select-option",17),s["\u0275\u0275text"](38,"Every week"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](39,"ion-select-option",18),s["\u0275\u0275text"](40,"Every month"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](41,"ion-select-option",19),s["\u0275\u0275text"](42,"Every year"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](43,"ion-item"),s["\u0275\u0275elementStart"](44,"ion-label",5),s["\u0275\u0275text"](45,"Note"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](46,"ion-textarea",20),s["\u0275\u0275listener"]("ngModelChange",function(e){return t.reminder.note=e}),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](47,"span",21),s["\u0275\u0275listener"]("click",function(){return t.save()}),s["\u0275\u0275text"](48,"Done"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](10),s["\u0275\u0275property"]("value",t.reminder.category)("ngModel",t.reminder.category),s["\u0275\u0275advance"](12),s["\u0275\u0275property"]("value",t.reminder.title)("ngModel",t.reminder.title),s["\u0275\u0275advance"](4),s["\u0275\u0275property"]("ngModel",t.reminder.time),s["\u0275\u0275advance"](4),s["\u0275\u0275property"]("value",t.reminder.repeat)("ngModel",t.reminder.repeat),s["\u0275\u0275advance"](16),s["\u0275\u0275property"]("value",t.reminder.note)("ngModel",t.reminder.note))},directives:[l.IonApp,l.IonHeader,l.IonIcon,l.IonContent,l.IonItem,l.IonLabel,l.IonSelect,l.SelectValueAccessor,i.NgControlStatus,i.NgModel,l.IonSelectOption,l.IonInput,l.TextValueAccessor,l.IonDatetime,l.IonTextarea],styles:[""]}),e})();var b=n(7877),S=n(8932);function y(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"p",17),s["\u0275\u0275text"](1," You have not added any reminder "),s["\u0275\u0275elementEnd"]())}function E(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"li",18),s["\u0275\u0275elementStart"](1,"div",19),s["\u0275\u0275listener"]("click",function(){const t=s["\u0275\u0275restoreView"](e).$implicit;return s["\u0275\u0275nextContext"]().toggle(t)}),s["\u0275\u0275elementStart"](2,"div",20),s["\u0275\u0275elementStart"](3,"p"),s["\u0275\u0275text"](4),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](5,"p",21),s["\u0275\u0275text"](6),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](7,"ion-icon",22),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](8,"app-expandable",23),s["\u0275\u0275elementStart"](9,"div",24),s["\u0275\u0275elementStart"](10,"p",25),s["\u0275\u0275text"](11),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](12,"div"),s["\u0275\u0275elementStart"](13,"p",26),s["\u0275\u0275text"](14,"Note:"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](15,"p"),s["\u0275\u0275text"](16),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](17,"p",27),s["\u0275\u0275listener"]("click",function(){const t=s["\u0275\u0275restoreView"](e).$implicit;return s["\u0275\u0275nextContext"]().remove(t.id)}),s["\u0275\u0275text"](18," Remove "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](4),s["\u0275\u0275textInterpolate"](e.title),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.date),s["\u0275\u0275advance"](1),s["\u0275\u0275classMapInterpolate1"]("text-xl ",e==n.expand?"rotate-90":"",""),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("expanded",e==n.expand),s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate"](e.category),s["\u0275\u0275advance"](5),s["\u0275\u0275textInterpolate"](e.note)}}const I=[{path:"",component:(()=>{class e{constructor(e,t,n,r,i,l,o,a){this.modalController=e,this.reminderService=t,this.global=n,this.userService=r,this.platform=i,this.router=l,this.webSocket=o,this.auth=a,this.expand=null,this.reminders=[],this.tip={},this.subs=[]}ngOnInit(){let e=this.reminderService.get().subscribe(e=>{console.log(e),this.reminders=e.map(e=>(e.date=(0,b.ZP)(new Date(e.time),"dd mmm, yyyy-hh:MMtt"),e))});this.subs.push(e),e=this.userService.fetchTip().subscribe(e=>{this.tip=e}),this.subs.push(e),e=this.platform.backButton.subscribe(()=>{this.modalController.dismiss()}),this.subs.push(e),e=this.webSocket.listen("reminder:update").subscribe(({user_id:e})=>{e==this.auth.loggedUser().id&&this.reminderService.update()}),this.subs.push(e)}toggle(e){this.expand=e==this.expand?null:e}remove(e){return(0,a.mG)(this,void 0,void 0,function*(){const{role:t}=yield this.global.alert("Remove alert/reminder","Are you sure you want to remove alert/reminder?",[{role:!1,text:"Cancel"},{role:!0,text:"OK"}]);t&&this.reminderService.remove(e).subscribe(t=>{this.reminders=this.reminders.filter(t=>t.id!=e),this.webSocket.emit("reminder:update",{user_id:this.auth.loggedUser().id}),this.reminderService.update()})})}showAdd(){return(0,a.mG)(this,void 0,void 0,function*(){(yield this.modalController.create({component:f,cssClass:"modal-80"})).present()})}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](l.ModalController),s["\u0275\u0275directiveInject"](h),s["\u0275\u0275directiveInject"](v.U),s["\u0275\u0275directiveInject"](u.K),s["\u0275\u0275directiveInject"](l.Platform),s["\u0275\u0275directiveInject"](o.F0),s["\u0275\u0275directiveInject"](g.i),s["\u0275\u0275directiveInject"](x.$))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["app-reminder"]],decls:26,vars:4,consts:[[1,"min-h-full","pale-bg-default","font-calibre","text-gray-900"],[1,"px-4","py-2","capitalize","text-xl","font-bold"],[1,"p-4","bg-white","grid","grid-cols-12",3,"click"],[1,"text-center","col-span-3"],["src","/assets/img/tip.svg"],[1,"col-span-9"],[1,"font-bold","mb-1","text-xl"],[1,"text-accentBlue","font-geomanist"],[1,"text-gray-500","font-geomanist"],[1,"flex","justify-center","my-6","items-center"],[1,"inline-block","font-bold","py-4","px-8","bg-white","rounded-xl",3,"click"],["name","add",1,"text-xl","relative","top-1"],[1,"uppercase","inline-block","ml-2"],[1,"pb-4"],[1,"px-4","font-bold","text-lg","tracking-wide"],["class","p-4 text-gray-500",4,"ngIf"],["class","bg-white p-4 mb-2",4,"ngFor","ngForOf"],[1,"p-4","text-gray-500"],[1,"bg-white","p-4","mb-2"],[1,"flex","justify-between","items-center",3,"click"],[1,"text-lg"],[1,"text-gray-500","text-sm"],["name","chevron-forward"],["expandHeight","500px",3,"expanded"],[1,"bg-white","mt-6","text-gray-600","space-y-4"],[1,"font-bold"],[1,"text-accentBlue"],[1,"bg-red-600","font-bold","text-white","p-3","text-center","rounded-full",3,"click"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"ion-content"),s["\u0275\u0275elementStart"](1,"div",0),s["\u0275\u0275elementStart"](2,"div"),s["\u0275\u0275elementStart"](3,"p",1),s["\u0275\u0275text"](4,"Daily health tip"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](5,"a",2),s["\u0275\u0275listener"]("click",function(){return t.router.navigate(["/education"]),t.modalController.dismiss()}),s["\u0275\u0275elementStart"](6,"div",3),s["\u0275\u0275element"](7,"img",4),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](8,"div",5),s["\u0275\u0275elementStart"](9,"p",6),s["\u0275\u0275text"](10),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](11,"p",7),s["\u0275\u0275text"](12," Learn more About diabetes "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](13,"p",8),s["\u0275\u0275text"](14),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](15,"div",9),s["\u0275\u0275elementStart"](16,"p",10),s["\u0275\u0275listener"]("click",function(){return t.showAdd()}),s["\u0275\u0275element"](17,"ion-icon",11),s["\u0275\u0275elementStart"](18,"span",12),s["\u0275\u0275text"](19,"New reminder"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](20,"div",13),s["\u0275\u0275elementStart"](21,"p",14),s["\u0275\u0275text"](22,"Reminders"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](23,y,2,0,"p",15),s["\u0275\u0275elementStart"](24,"ul"),s["\u0275\u0275template"](25,E,19,8,"li",16),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](10),s["\u0275\u0275textInterpolate"](t.tip.title),s["\u0275\u0275advance"](4),s["\u0275\u0275textInterpolate"](t.tip.note),s["\u0275\u0275advance"](9),s["\u0275\u0275property"]("ngIf",0==t.reminders.length),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngForOf",t.reminders))},directives:[l.IonContent,l.IonIcon,r.NgIf,r.NgForOf,S.I],styles:[""]}),e})()}];let w=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=s["\u0275\u0275defineInjector"]({imports:[[o.Bz.forChild(I)],o.Bz]}),e})(),C=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=s["\u0275\u0275defineInjector"]({imports:[[r.CommonModule,i.FormsModule,l.IonicModule,w]]}),e})()}}]);